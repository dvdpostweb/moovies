<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" CONTENT="noindex, nofollow">
  <title>Plush - Orange</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">
  <%= stylesheet_link_tag "application", :media => "all" %>
  <style>
    @media (max-width: 479px) {
      .landing.orange .promotion-codebox .btn {
        width: 100%;
        margin-top: 10px;
      }
    }
  </style>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="icon" type="image/x-icon" href="<%= asset_path("template/favicon.ico") %>">
  <link rel="icon" type="image/png" href="<%= asset_path("template/favicon.ico") %>">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="<%= asset_path("template/favicon114x114.png") %>">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="<%= asset_path("template/favicon72x72.png") %>">
  <link rel="apple-touch-icon-precomposed" href="<%= asset_path("template/favicon57x57.png") %>">
  <%= include_gon(namespace: 'Plush') %>
  <%= Gon::Base.render_data %>
  <%= javascript_include_tag "application" %>
</head>
<body>
<div class="canavas" id="">
  <div id="overlay"></div>
  <div id="on-top" class="pad10 radius4 dark-gray-bck">
    <i class="fa fa-angle-up f30 light-gray"></i>
  </div>
  <div class="side-menu box-shadow">
    <div class="side-menu-close f33"></div>
    <div class="side-menu-login mart10 block100"></div>
    <div class="side-menu-nav mart15 block100"></div>
    <div class="side-menu-search mart15"></div>
  </div>
  <div class="wrap">
    <nav id="mainNav" class="navbar navbar-default white-bck promotion-top">
      <div class="navbar-header block100 padr20">
        <a class="navbar-brand" href="<%= root_localize_path %>">
          <%= image_tag "template/plush-logo-trans.png", alt: "Plush" %>
        </a>
        <a class="navbar-brand pull-right" href="http://www.mobistar.be/" target="_blank">
          <%= image_tag "orange_logo.jpg", alt: "Orange" %>
        </a>
      </div>
    </nav>
    <%= yield %>
  </div>
</div>
<%= javascript_include_tag *webpack_asset_paths("application") %>

<script>

$(document).ready(function () {
    jQuery.validator.addMethod("phone", function (phone_number, element) {
        phone_number = phone_number.replace(/\s+/g, "");
        return this.optional(element) || phone_number.length > 8 &&
            phone_number.match(/^[0-9-+]+$/);
    }, gon.orange_invalid_phone_number_format);
    $("#form").validate({
        rules: {
            "promo-code": {
                required: true,
                phone: true
            }
        },
        messages: {
            "promo-code": {
                required: telephoneValidationMessage()
            }
        },
        highlight: function (element) {
            $(element).closest('.form-group').addClass('has-error');
        },
        unhighlight: function (element) {
            $(element).closest('.form-group').removeClass('has-error');
        },
        errorElement: 'span',
        errorClass: 'help-block',
        errorPlacement: function (error, element) {
            error.appendTo('#errordiv');
        },
        submitHandler: function (form) {
            localStorage.setItem("plush_phone_number", $(".input-group-addon").html() + $("#promo-code").val());
            window.location.href = gon.root_localize_path;
        }
    });
});

function telephoneValidationMessage() {
    if (gon.locale == "fr") {
        return "Téléphone est nécessaire."
    } else if (gon.locale == "nl") {
        return "Telefoon is verplicht."
    } else if (gon.locale == "en") {
        return "Telephone is required."
    }
}

</script>

</body>
</html>
